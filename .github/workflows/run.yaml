name: Run VRP Solvers

on:
  push:
    branches: [ main, development ]
  pull_request:
    branches: [ main, development ]
  workflow_dispatch:
    branches: [ main, development ]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Setup
        run: |
          echo "Hello World!"
          echo

          if [ -d "_venv_" ] ; then
            echo "Existing virtual environment found."
          else
            echo "Creating new virtual environment..."
            python -m venv _venv_
          fi

          source _venv_/Scripts/activate

          echo
          echo "Installing requirements..."
          python -m pip install -U pip
          python -m pip install -r requirements.txt

          echo
          echo "Running 'dwave setup'..."
          echo

          dwave setup

          echo
          echo "You're all set!"
      # - name: install requirements
      #   run: pip install -r requirements.txt
      - name: Run VRP Solvers
        run: python solve_vrp.py
